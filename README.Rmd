---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# EMODnetWCS

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/EMODnetWCS)](https://CRAN.R-project.org/package=EMODnetWCS)
[![R-CMD-check](https://github.com/EMODnet/EMODnetWCS/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/EMODnet/EMODnetWCS/actions/workflows/R-CMD-check.yaml)
[![Codecov test coverage](https://codecov.io/gh/EMODnet/EMODnetWCS/branch/main/graph/badge.svg)](https://app.codecov.io/gh/EMODnet/EMODnetWCS?branch=master)
<!-- badges: end -->


The goal of EMODnetWCS is to allow interrogation of and access to EMODnet geographic raster data in R though the [EMODnet Web Coverage Services](https://github.com/EMODnet/Web-Service-Documentation#web-coverage-service-wcs). See below for available Services. This package was developed by Sheffield University as part of EMODnet Biology WP4.

[Web Coverage services (WCS)](https://www.ogc.org/standards/wcs) is a standard created by the OGC that refers to the receiving of geospatial information as ‘coverages’: digital geospatial information representing space-varying phenomena. One can think of it as Web Feature Service (WFS) for raster data. It gets the ‘source code’ of the map, but in this case its not raw vectors but raw imagery.

An important distinction must be made between WCS and Web Map Service (WMS). They are similar, and can return similar formats, but a WCS is able to return more information, including valuable metadata and more formats. It additionally allows more precise queries, potentially against multi-dimensional backend formats.

## Installation

You can install the development version of EMODnetWCS from GitHub with:

``` r
# install.packages("remotes")
remotes::install_github("EMODnet/EMODnetWCS")
```
Load the library 
```{r load-lib}
library(EMODnetWCS)
```

## Available services

All available services are contained in the tibble returned by `emdn_wcs()`.


```{r services, echo=FALSE}

knitr::kable(emdn_wcs())
```

To explore available services in Rstudio use:

```r
View(emdn_wcs())
```


## Create Service Client

Create new WCS Client.  Specify the service using the `service` argument. 

```{r wcs-init}
wcs <- emdn_init_wcs_client(service = "biology")

wcs$getUrl()
```


## Get Information about a WCS service

Get information about a WCS service by supplying a `wcs` object to `emdn_get_wcs_info`

```{r wcs-info}
emdn_get_wcs_info(wcs)
```

Info can also be extracted using a service name instead of a `wcs` object.

```{r wcs-info-name}
emdn_get_wcs_info(service = "bathymetry")
```


```{r wcs-info-coverage}
emdn_get_coverage_info(service = "human_activities", 
                              coverage_ids = "emodnet__2017_01_st_00")
```


> **Note** 
>
> To minimize the number of requests sent to webservices, these functions use [`memoise`](https://memoise.r-lib.org/) to cache results inside the active R session.
> To clear the cache, re-start R or run `memoise::forget(emdn_get_wcs_info)`/`memoise::forget(emdn_get_coverage_info)`

## Citation

To cite EMODnetWCS, please use the output from `citation(package = "EMODnetWCS")`.

```{r}
citation(package = "EMODnetWCS")
```



## Code of Conduct

Please note that the EMODnetWCS project is released with a [Contributor Code of Conduct](https://emodnet.github.io/EMODnetWCS/CODE_OF_CONDUCT.html). By contributing to this project, you agree to abide by its terms.
