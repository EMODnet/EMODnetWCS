---
title: "Download Coverages"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

library(httptest)
start_vignette("get-cov")
```

```{r setup}
library(EMODnetWCS)
```



```{r}
wcs <- emdn_init_wcs_client(service = "biology")
coverage_id <- "Emodnetbio__cal_fin_19582016_L1_err"

```

# Subset using a bounding box

```{r}
emdn_get_coverage(wcs,
                  coverage_id = coverage_id,
                  bbox = c(xmin = 0, ymin = 40,
                           xmax = 5, ymax = 45))
```


## Subset using a bounding box and specific timepoints


```{r}
emdn_get_coverage(wcs,
                  coverage_id = coverage_id,
                  bbox = c(xmin = 0, ymin = 40,
                           xmax = 5, ymax = 45),
                  time = c("1963-11-16T00:00:00.000Z",
                           "1964-02-16T00:00:00.000Z"))
```

## Subset using a bounding box and a specific band

```{r}
emdn_get_coverage(wcs, 
                  coverage_id = coverage_id,
                  bbox = c(xmin = 0, ymin = 40,
                           xmax = 5, ymax = 45),
                  rangesubset = "Relative abundance")
```


```{r, echo=FALSE, message=FALSE, warning=FALSE}
fs::dir_ls(type = "file", glob = "*.tif") |>
    fs::file_delete()
```


```{r cov-stop-recording, include=FALSE}
end_vignette()
```
