---
title: "Getting metadata about services and available metadata"
---

`EMODnetWCS` offers a number of functions to download and extract metadata about EMODnet WCS services and available coverages.

Metadata include information about each service, the coverages served by the server and information about indidual coverages including the geographic, temporal and elevation extents, grid sizes and resolution, coverage coordinate reference systems and how grid coordinates relate to geographic coordinates as well as the names, units and ranges of bands contained in a coverage.

There are functions for downloading compiled metadata for easy review as well as for extracting individual metadata in more usable forms.

## Downloading & extracting compiled metadata on services and coverages.


```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

First let's load the package and initiate a client to the `"biology"` EMODnet WCS server.

```{r setup}
library(EMODnetWCS)

wcs <- emdn_init_wcs_client(service = "biology")
```

To get service level and a subset of coverage level compiled metadata, we can use function `emdn_get_wcs_info()`.

We can supply a `WCSClient` object through argument `wcs` to get compiled metadata from the server.

```{r}
wcs_info <- emdn_get_wcs_info(wcs = wcs)

wcs_info
```

This returns a list of service level metadata which includes a tibble of summaries of coverage level metadata in the `coverage_details` element.

Let's take a closer look at the metadata in `coverage_details`. For details on the metadata details, have a look at the `emdn_get_wcs_info()` help page (or use `?emdn_get_wcs_info` in R or Rstudio). 


```{r coverage_details, echo=FALSE}
library(huxtable)
hux(wcs_info$coverage_details) |>
    style_cells(1, everywhere, bold = TRUE) |>
    style_cells(everywhere, 1, bold = TRUE) |>
    set_font_size(everywhere, everywhere, 10)
    
```

You can get metadata for all EMODnet WCS services using `emdn_get_wcs_info_all()`. Note however that this can take a long time to execute.


```{r, eval=FALSE}
emdn_get_wcs_info_all()
```


> **Note** 
>
> To minimize the number of requests sent to webservices, these functions use [`memoise`](https://memoise.r-lib.org/) to cache results inside the active R session.
> To clear the cache, re-start R or run `memoise::forget(emdn_get_wcs_info)`/`memoise::forget(emdn_get_coverage_info)`
